{% extends 'base.html' %}
{% load static %}

{% block title %}Iniciar Sesión{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'auth/signin.css' %}">
{% endblock %}

{% block content %}
<!-- Sección Principal -->
<section class="flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-blue-100 relative overflow-hidden">
  <!-- Neural Network Background Canvas -->
  <canvas id="neural-bg-canvas" class="absolute inset-0 w-full h-full pointer-events-none z-0"></canvas>

  <div class="w-full max-w-md login-glass relative z-10">
    <!-- Título -->
    <h2 class="text-3xl font-extrabold text-center">Bienvenido de nuevo</h2>
    <p class="text-center text-sm text-gray-200">Inicia sesión para acceder a tu cuenta</p>

    <!-- Formulario -->
    <form method="post" id="loginForm" class="space-y-5">
      {% csrf_token %}

      <!-- Campo Email -->
      <div>
        <label for="email">Correo Electrónico</label>
        <input type="email" name="username" id="email" required autofocus
               placeholder="usuario@ejemplo.com"
               class="w-full mt-1 px-4 py-3 border-none rounded-xl shadow-sm focus:ring-2 focus:ring-blue-400 focus:outline-none transition duration-200">
      </div>

      <!-- Campo Contraseña -->
      <div>
        <label for="password">Contraseña</label>
        <input type="password" name="password" id="password" required
               placeholder="••••••••"
               class="w-full mt-1 px-4 py-3 border-none rounded-xl shadow-sm focus:ring-2 focus:ring-blue-400 focus:outline-none transition duration-200">
      </div>

      <!-- Errores -->
      {% if form.errors %}
      <div class="form-error">
        {% for field in form %}
          {% for error in field.errors %}
            <p>{{ error }}</p>
          {% endfor %}
        {% endfor %}
        {% for error in form.non_field_errors %}
          <p>{{ error }}</p>
        {% endfor %}
      </div>
      {% endif %}

      <!-- Link Olvidaste tu contraseña -->
      <div class="flex justify-end">
        <a href="#" class="no-underline-link">¿Olvidaste tu contraseña?</a>
      </div>

      <!-- Botón Iniciar Sesión -->
      <button type="submit" id="loginButton" class="w-full btn-neon relative overflow-hidden">
        Iniciar Sesión
      </button>
    </form>

    <!-- Pie de formulario opcional -->
    <p class="text-center text-xs text-gray-300">¿No tienes cuenta?
      <a href="#">Regístrate</a>
    </p>
  </div>
</section>

<!-- Loading Animado Futurista -->
<div id="medicalLoading" class="fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-[#0f172a] via-[#334155] to-[#64748b] backdrop-blur-2xl overflow-hidden hidden">
  <!-- Partículas flotantes -->
  <div class="particles absolute w-full h-full pointer-events-none">
    <div class="particle" style="left: 10%; animation-delay: 0s;"></div>
    <div class="particle" style="left: 20%; animation-delay: 1s;"></div>
    <div class="particle" style="left: 30%; animation-delay: 2s;"></div>
    <div class="particle" style="left: 40%; animation-delay: 3s;"></div>
    <div class="particle" style="left: 50%; animation-delay: 4s;"></div>
    <div class="particle" style="left: 60%; animation-delay: 5s;"></div>
    <div class="particle" style="left: 70%; animation-delay: 6s;"></div>
    <div class="particle" style="left: 80%; animation-delay: 7s;"></div>
    <div class="particle" style="left: 90%; animation-delay: 8s;"></div>
  </div>
  <!-- Ondas de radar -->
  <div class="radar-container absolute w-[600px] h-[600px] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none">
    <div class="radar-wave"></div>
    <div class="radar-wave"></div>
    <div class="radar-wave"></div>
  </div>
  <!-- Efecto de resplandor -->
  <div class="glow-effect absolute"></div>
  <!-- Contenedor principal -->
  <div class="loading-container text-center relative z-10">
    <!-- Hexágono con icono -->
    <div class="hexagon-container relative mb-12">
      <!-- Órbitas -->
      <div class="orbit orbit-1">
        <div class="orbit-item"></div>
      </div>
      <div class="orbit orbit-2">
        <div class="orbit-item"></div>
      </div>
      <!-- Hexágono principal -->
      <div class="hexagon flex items-center justify-center">
        <i class="fas fa-user-md medical-icon"></i>
      </div>
    </div>
    <!-- Textos -->
    <h2 class="loading-title">SISTEMA MÉDICO</h2>
    <p class="loading-subtitle">Inicializando protocolo avanzado...</p>
    <!-- Barra de progreso -->
    <div class="progress-container mb-8">
      <div class="progress-bar">
        <div class="progress-fill"></div>
      </div>
    </div>
    <!-- Estados del sistema -->
    <div class="status-grid">
      <div class="status-item">
        <i class="fas fa-database status-icon"></i>
        <div class="status-text">Base de Datos</div>
      </div>
      <div class="status-item">
        <i class="fas fa-shield-alt status-icon"></i>
        <div class="status-text">Seguridad</div>
      </div>
      <div class="status-item">
        <i class="fas fa-heartbeat status-icon"></i>
        <div class="status-text">Monitoreo</div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'auth/signin.js' %}"></script>
{% endblock %}